# UI/UX設計書

## デザイン原則

### 1. ユーザー中心設計
- **明確な情報階層**: プロンプト生成が主要機能であることを明確化
- **直感的な操作**: 3タップ以内でプロンプトを生成・コピー可能
- **学習コストの最小化**: ビール愛好家が慣れ親しんだUXパターンを採用

### 2. プライバシー配慮
- **透明性**: データの保存場所・使用方法を明示
- **ユーザー制御**: すべてのデータ操作をユーザーが制御
- **最小限の情報収集**: 必要最小限の情報のみ収集

### 3. AIサービス中立
- **ブランド中立**: 特定のAIサービスを推奨しない
- **選択の自由**: ユーザーが自由にAIサービスを選択できる設計
- **汎用性**: どのAIサービスでも使いやすいプロンプト形式

## 情報アーキテクチャ

```
NextPint App
├── オンボーディング
│   ├── アプリ説明
│   ├── プライバシー説明
│   └── 初期設定
├── ホーム画面
│   ├── クイックアクション
│   ├── 最近のセッション
│   └── インポート状況
├── セッション作成
│   ├── 目標設定
│   ├── 好み入力
│   ├── 制約設定
│   └── プロンプト生成
├── 履歴管理
│   ├── ビール履歴
│   ├── セッション履歴
│   └── プロンプト履歴
├── データインポート
│   ├── サービス選択
│   ├── プロンプト表示
│   └── 結果入力
└── 設定
    ├── 個人設定
    ├── データ管理
    └── アプリ情報
```

## 画面設計

### 1. オンボーディング

#### 1.1 ウェルカム画面
```
┌─────────────────────────────────┐
│           NextPint              │
│                                 │
│    🍺  AI Beer Discovery       │
│        Prompt Provider          │
│                                 │
│  ビール探索の新しい形           │
│  AIプロンプトで発見の旅を       │
│                                 │
│  [はじめる]                     │
│                                 │
│                                 │
└─────────────────────────────────┘
```

#### 1.2 コンセプト説明
```
┌─────────────────────────────────┐
│  < NextPintとは？               │
│                                 │
│  ❌ ビールを推薦しません        │
│  ✅ プロンプトを提供します      │
│                                 │
│  あなたの好みを理解し、         │
│  ChatGPT、Claude、Geminiで      │
│  使える最適なプロンプトを       │
│  生成します。                   │
│                                 │
│  [次へ]               [スキップ] │
└─────────────────────────────────┘
```

#### 1.3 プライバシー説明
```
┌─────────────────────────────────┐
│  < プライバシー保護             │
│                                 │
│  🔒 すべてローカル保存          │
│  🚫 外部APIに個人データ送信なし │
│  👤 あなたが完全にコントロール  │
│                                 │
│  データは端末内のみに保存され、 │
│  プライバシーを最大限保護します │
│                                 │
│  [同意して続行]       [詳細を見る] │
└─────────────────────────────────┘
```

### 2. ホーム画面

```
┌─────────────────────────────────┐
│  ☰  NextPint           🔍 ⚙️  │
│                                 │
│  クイックアクション             │
│  ┌─────────┐ ┌─────────┐      │
│  │ 🎯 新しい│ │ 📤 データ│      │
│  │ セッション│ │ インポート│      │
│  │ 作成     │ │         │      │
│  └─────────┘ └─────────┘      │
│                                 │
│  最近のセッション               │
│  ┌─────────────────────────┐   │
│  │ 🍺 新しいIPAを探す       │   │
│  │ 2時間前 • 3個のプロンプト │   │
│  └─────────────────────────┘   │
│                                 │
│  インポート状況                 │
│  📊 124個のビール • Untappd    │
│                                 │
└─────────────────────────────────┘
```

### 3. セッション作成画面

#### 3.1 セッション目標設定
```
┌─────────────────────────────────┐
│  < セッション作成               │
│                                 │
│  今日は何を探しますか？         │
│                                 │
│  ○ 新しいスタイルを試したい     │
│  ○ 定番の美味しいビールを探す   │
│  ○ 特別な日のビールを見つける   │
│  ○ 地元のクラフトビールを発見   │
│  ○ 予算内で最高のビールを探す   │
│  ● カスタム目標                 │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 友人との特別な夜に合う    │   │
│  │ プレミアムなビールを探す  │   │
│  └─────────────────────────┘   │
│                                 │
│              [次へ]             │
└─────────────────────────────────┘
```

#### 3.2 好み・気分設定
```
┌─────────────────────────────────┐
│  < 好み・気分                   │
│                                 │
│  今日の気分は？                 │
│  [冒険的] [安定志向] [リラックス] │
│                                 │
│  味の好み                       │
│  ホッピー    ●●●○○             │
│  モルティ    ●●○○○             │
│  バランス    ●●●●○             │
│                                 │
│  避けたい要素                   │
│  ☑️ 酸味が強いもの               │
│  ☑️ アルコール度数が高すぎるもの │
│  ☐ 苦味が強すぎるもの           │
│                                 │
│  [戻る]              [次へ]     │
└─────────────────────────────────┘
```

#### 3.3 制約・条件設定
```
┌─────────────────────────────────┐
│  < 制約・条件                   │
│                                 │
│  場所・地域                     │
│  ┌─────────────────────────┐   │
│  │ 渋谷・新宿周辺            │   │
│  └─────────────────────────┘   │
│                                 │
│  予算                           │
│  ○ 1杯500円以下                │
│  ● 1杯1000円以下               │
│  ○ 予算は気にしない             │
│                                 │
│  その他の条件                   │
│  ☑️ 缶ビールのみ                 │
│  ☐ 持ち帰り可能                 │
│  ☑️ 今すぐ入手可能               │
│                                 │
│  [戻る]              [次へ]     │
└─────────────────────────────────┘
```

#### 3.4 プロンプト生成結果
```
┌─────────────────────────────────┐
│  < 生成されたプロンプト         │
│                                 │
│  🎯 友人との特別な夜用プロンプト │
│                                 │
│  ┌─────────────────────────┐   │
│  │ あなたはビール専門家です。│   │
│  │ 以下の条件で最適なビール  │   │
│  │ を3つ提案してください：   │   │
│  │                         │   │
│  │ 【目的】友人との特別な夜  │   │
│  │ 【場所】渋谷・新宿周辺    │   │
│  │ 【予算】1杯1000円以下     │   │
│  │ 【好み】ホッピー、バランス│   │
│  │ ...                     │   │
│  └─────────────────────────┘   │
│                                 │
│  [📋 コピー]          [🔄 再生成] │
│  [💾 保存]           [🚀 使用する] │
└─────────────────────────────────┘
```

### 4. データインポート画面

#### 4.1 サービス選択
```
┌─────────────────────────────────┐
│  < データインポート             │
│                                 │
│  どのサービスからインポート     │
│  しますか？                     │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 📱 Untappd              │   │
│  │ 最も人気のビールアプリ    │   │
│  └─────────────────────────┘   │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 🍺 RateBeer             │   │
│  │ ビール評価コミュニティ    │   │
│  └─────────────────────────┘   │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 📊 BeerAdvocate         │   │
│  │ ビール情報データベース    │   │
│  └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

#### 4.2 インポート手順
```
┌─────────────────────────────────┐
│  < Untappdからインポート        │
│                                 │
│  📱 STEP 1: スクリーンショット   │
│     Untappdアプリで履歴画面を   │
│     スクリーンショット撮影      │
│                                 │
│  🤖 STEP 2: AIプロンプト使用    │
│     生成されたプロンプトを      │
│     ChatGPTなどにコピー        │
│                                 │
│  📋 STEP 3: 結果の貼り付け      │
│     AIの分析結果をここに       │
│     貼り付けてください         │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 📋 プロンプトを表示       │   │
│  └─────────────────────────┘   │
│                                 │
│              [次へ]             │
└─────────────────────────────────┘
```

### 5. 履歴管理画面

#### 5.1 ビール履歴
```
┌─────────────────────────────────┐
│  ☰  ビール履歴         🔍 📊    │
│                                 │
│  📈 124個のビール • 15醸造所    │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 🍺 Yebisu Premium        │   │
│  │ サッポロビール • ★★★★☆    │   │
│  │ ラガー • 2日前           │   │
│  └─────────────────────────┘   │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 🍺 ヤッホーブルーイング   │   │
│  │ よなよなエール • ★★★★★    │   │
│  │ ペールエール • 1週間前    │   │
│  └─────────────────────────┘   │
│                                 │
│  フィルタ: [スタイル] [醸造所]   │
│           [評価] [期間]          │
│                                 │
└─────────────────────────────────┘
```

#### 5.2 セッション履歴
```
┌─────────────────────────────────┐
│  ☰  セッション履歴              │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 🎯 友人との特別な夜        │   │
│  │ 3個のプロンプト • 2時間前  │   │
│  │ 完了 • 満足度: ★★★★☆     │   │
│  └─────────────────────────┘   │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 🌟 新しいIPAを探す        │   │
│  │ 2個のプロンプト • 1日前   │   │
│  │ 進行中                   │   │
│  └─────────────────────────┘   │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 🏠 家飲み用ビール探し     │   │
│  │ 1個のプロンプト • 3日前   │   │
│  │ 完了 • 満足度: ★★★★★     │   │
│  └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

### 6. 設定画面

```
┌─────────────────────────────────┐
│  ☰  設定                       │
│                                 │
│  個人設定                       │
│  ┌─────────────────────────┐   │
│  │ 👤 好みプロファイル       │   │
│  │ 🌍 言語・地域設定         │   │
│  │ 🎨 テーマ設定             │   │
│  └─────────────────────────┘   │
│                                 │
│  データ管理                     │
│  ┌─────────────────────────┐   │
│  │ 📊 ストレージ使用状況     │   │
│  │ 💾 データバックアップ     │   │
│  │ 🗑️  データ削除           │   │
│  └─────────────────────────┘   │
│                                 │
│  アプリ情報                     │
│  ┌─────────────────────────┐   │
│  │ ℹ️  バージョン情報         │   │
│  │ 📝 プライバシーポリシー   │   │
│  │ 📞 サポート・フィードバック│   │
│  └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

## インタラクションデザイン

### 1. プロンプト生成フロー

```
目標設定 → 好み入力 → 制約設定 → プロンプト生成 → コピー → AI使用
   ↓         ↓         ↓         ↓         ↓       ↓
[30秒]    [60秒]    [30秒]    [即座]    [即座]  [ユーザー]
```

### 2. データインポートフロー

```
サービス選択 → 手順説明 → プロンプト表示 → 結果入力 → データ保存
     ↓          ↓          ↓          ↓         ↓
   [10秒]     [30秒]     [即座]     [60秒]    [即座]
```

### 3. 学習・改善フロー

```
使用結果 → 満足度評価 → フィードバック → プロンプト改善
   ↓         ↓           ↓           ↓
[自動]    [15秒]      [30秒]      [バックグラウンド]
```

## コンポーネント設計

### 1. 共通コンポーネント

#### Button Component
```typescript
interface ButtonProps {
  variant: 'primary' | 'secondary' | 'outline' | 'text';
  size: 'small' | 'medium' | 'large';
  icon?: ReactNode;
  loading?: boolean;
  disabled?: boolean;
  children: ReactNode;
  onPress: () => void;
}
```

#### PromptCard Component
```typescript
interface PromptCardProps {
  prompt: GeneratedPrompt;
  onCopy: () => void;
  onRegenerate?: () => void;
  onUse?: () => void;
  showActions?: boolean;
}
```

#### BeerItem Component
```typescript
interface BeerItemProps {
  beer: ImportedBeer;
  showRating?: boolean;
  showDate?: boolean;
  onPress?: () => void;
  layout: 'list' | 'card' | 'compact';
}
```

### 2. 画面固有コンポーネント

#### SessionForm Component
```typescript
interface SessionFormProps {
  initialData?: Partial<BeerSearchSession>;
  onSubmit: (session: BeerSearchSession) => void;
  onCancel: () => void;
}
```

#### ImportWizard Component
```typescript
interface ImportWizardProps {
  source: ImportSource;
  onComplete: (beers: ImportedBeer[]) => void;
  onCancel: () => void;
}
```

## アクセシビリティ

### 1. 視覚的配慮
- **高コントラスト**: WCAG 2.1 AA準拠
- **大きなタッチターゲット**: 最低44px×44px
- **明確なフォーカスインジケーター**: キーボードナビゲーション対応

### 2. 聴覚的配慮
- **スクリーンリーダー対応**: 適切なaria-labelの設定
- **代替テキスト**: すべての画像・アイコンに代替テキスト

### 3. 運動機能配慮
- **片手操作対応**: 重要な機能は画面下部に配置
- **ジェスチャー代替**: すべてのジェスチャーにボタン代替を提供

## レスポンシブデザイン

### 1. 画面サイズ対応
```typescript
const breakpoints = {
  small: '< 375px',   // iPhone SE
  medium: '375-414px', // iPhone 12
  large: '> 414px',   // iPhone 12 Pro Max
  tablet: '> 768px'   // iPad
};
```

### 2. 向き対応
- **ポートレート**: 主要な使用向き
- **ランドスケープ**: セッション作成時の詳細入力に最適化

## ダークモード対応

### カラーパレット
```typescript
const colors = {
  light: {
    primary: '#D4A574',      // ビールゴールド
    secondary: '#8B4513',    // ダークブラウン
    background: '#FFFFFF',
    surface: '#F5F5F5',
    text: '#333333',
    textSecondary: '#666666'
  },
  dark: {
    primary: '#E6B887',      // ライトビールゴールド
    secondary: '#CD853F',    // ライトブラウン
    background: '#121212',
    surface: '#1E1E1E',
    text: '#FFFFFF',
    textSecondary: '#AAAAAA'
  }
};
```

## アニメーション・トランジション

### 1. 画面遷移
- **ナビゲーション**: slide (300ms)
- **モーダル**: fade + scale (250ms)
- **ボトムシート**: slideUp (200ms)

### 2. マイクロインタラクション
- **ボタンタップ**: scale (100ms)
- **プロンプト生成**: typing animation
- **データロード**: skeleton loading

## エラーハンドリング

### 1. エラー表示パターン
```typescript
interface ErrorState {
  type: 'network' | 'validation' | 'storage' | 'unknown';
  message: string;
  action?: {
    label: string;
    onPress: () => void;
  };
}
```

### 2. 空状態
```
┌─────────────────────────────────┐
│                                 │
│           🍺                    │
│                                 │
│     まだビールがありません       │
│                                 │
│   データをインポートして         │
│   ビール履歴を作成しましょう     │
│                                 │
│  [📤 データをインポート]         │
│                                 │
└─────────────────────────────────┘
```

## パフォーマンス最適化

### 1. レンダリング最適化
- **仮想化リスト**: 大量データの効率的表示
- **画像最適化**: 適応的サイズとフォーマット
- **コンポーネント分割**: 適切な再レンダリング制御

### 2. ナビゲーション最適化
- **レイジーローディング**: 画面の遅延読み込み
- **プリロード**: 予測的なデータ読み込み
- **キャッシュ戦略**: 効率的なデータキャッシュ

## テスト戦略

### 1. ユーザビリティテスト
- **タスク完了率**: 主要機能の完了率測定
- **エラー率**: ユーザーエラーの発生頻度
- **満足度**: 主観的満足度の評価

### 2. アクセシビリティテスト
- **スクリーンリーダーテスト**: VoiceOver/TalkBack
- **キーボードナビゲーション**: フォーカス遷移確認
- **色覚テスト**: 色覚多様性対応確認