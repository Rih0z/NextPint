(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[899],{5525:function(e,s,t){Promise.resolve().then(t.bind(t,4797))},5137:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2468:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},933:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6884:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},1077:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},4042:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9321:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8137:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},6706:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},1510:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},1902:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},883:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4797:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z},dynamic:function(){return w},runtime:function(){return k}});var r=t(7437),a=t(2265),n=t(6463),c=t(89),i=t(5137),l=t(8137),d=t(1510);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(1066).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var x=t(883),m=t(1902),u=t(4042),h=t(9321),p=t(1077),y=t(933),g=t(3907),f=t(6706),j=t(2468),v=t(6884),b=t(4935),N=t(4613);let k="edge",w="force-dynamic";function Z(){var e,s;let{t}=(0,c.$G)(),k=(0,n.useRouter)(),w=(0,n.useParams)().id,[Z,S]=(0,a.useState)(null),[D,C]=(0,a.useState)(!0),[P,A]=(0,a.useState)(!1),[E,z]=(0,a.useState)(!1),[M,_]=(0,a.useState)(!1),[L,q]=(0,a.useState)(0);(0,a.useEffect)(()=>{G(),N.w.getAnalyticsService().trackEvent("page_view",{page:"session_detail",sessionId:w})},[w]);let G=async()=>{try{let e=N.w.getStorageService(),s=(await e.getSessions()).find(e=>e.id===w||e.sessionId===w);s?S(s):k.push("/sessions")}catch(e){console.error("Error loading session:",e),k.push("/sessions")}finally{C(!1)}},H=async e=>{try{await navigator.clipboard.writeText(e),A(!0),N.w.getAnalyticsService().trackEvent("prompt_copied",{sessionId:w}),setTimeout(()=>A(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},T=async()=>{if(Z){z(!0);try{N.w.getAnalyticsService().trackEvent("prompt_regenerate_start",{sessionId:w});let e=N.w.getPromptService(),s=await e.generateSessionPrompt(Z.profile),t={...Z,generatedPrompts:[...Z.generatedPrompts,s],updatedAt:new Date().toISOString()},r=N.w.getStorageService(),a=(await r.getSessions()).map(e=>e.id===w?t:e);await r.saveSessions(a),S(t),q(t.generatedPrompts.length-1),N.w.getAnalyticsService().trackEvent("prompt_regenerated",{sessionId:w,promptCount:t.generatedPrompts.length})}catch(e){console.error("Error regenerating prompt:",e),N.w.getAnalyticsService().trackEvent("prompt_regenerate_error",{sessionId:w,error:e instanceof Error?e.message:String(e)}),alert("プロンプト再生成中にエラーが発生しました")}finally{z(!1)}}},I=async()=>{if(Z&&confirm("このセッションを削除しますか？この操作は取り消せません。"))try{N.w.getAnalyticsService().trackEvent("session_delete",{sessionId:w});let e=N.w.getStorageService(),s=(await e.getSessions()).filter(e=>e.id!==w);await e.saveSessions(s),k.push("/sessions")}catch(e){console.error("Error deleting session:",e),alert("セッション削除中にエラーが発生しました")}},V=async()=>{if(!Z)return;let e={title:"NextPint: ".concat(Z.profile.sessionGoal),text:"ビール発見セッション: ".concat(Z.profile.sessionGoal),url:window.location.href};try{navigator.share?(await navigator.share(e),N.w.getAnalyticsService().trackEvent("session_shared",{sessionId:w,method:"native"})):(await navigator.clipboard.writeText(window.location.href),alert("URLをクリップボードにコピーしました"),N.w.getAnalyticsService().trackEvent("session_shared",{sessionId:w,method:"clipboard"}))}catch(e){console.error("Error sharing:",e)}};return D?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-dark",children:[(0,r.jsx)(b.Z,{}),(0,r.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-4rem)]",children:(0,r.jsxs)("div",{className:"text-center animate-fade-in",children:[(0,r.jsx)("div",{className:"spinner mx-auto mb-6"}),(0,r.jsx)("p",{className:"text-lg text-text-secondary",children:"読み込み中..."})]})})]}):Z?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-dark",children:[(0,r.jsx)(b.Z,{}),(0,r.jsxs)("main",{className:"mobile-container mobile-section pb-24 lg:pb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:()=>k.push("/sessions"),className:"btn-secondary-small",children:(0,r.jsx)(i.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"セッション詳細"}),(0,r.jsx)("p",{className:"text-text-secondary",children:new Date(Z.createdAt).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>_(!M),className:"btn-secondary-small",children:(0,r.jsx)(l.Z,{size:20})}),M&&(0,r.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-48 bg-background-secondary border border-gray-700 rounded-lg shadow-xl z-10",children:[(0,r.jsxs)("button",{onClick:()=>{V(),_(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-background-tertiary transition-colors",children:[(0,r.jsx)(d.Z,{size:16}),"共有"]}),(0,r.jsxs)("button",{onClick:()=>{k.push("/sessions/".concat(w,"/edit")),_(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-background-tertiary transition-colors",children:[(0,r.jsx)(o,{size:16}),"編集"]}),(0,r.jsxs)("button",{onClick:()=>{I(),_(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-red-400 hover:bg-red-500/10 transition-colors",children:[(0,r.jsx)(x.Z,{size:16}),"削除"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsx)("div",{className:"glass-card rounded-xl p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-primary-500/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)(m.Z,{size:24,className:"text-primary-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"セッション目標"}),(0,r.jsx)("p",{className:"text-text-secondary",children:Z.profile.sessionGoal})]}),(0,r.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"active":return"bg-green-500/20 text-green-400";case"completed":return"bg-blue-500/20 text-blue-400";default:return"bg-gray-500/20 text-gray-400"}})(Z.status)),children:(e=>{switch(e){case"active":return"アクティブ";case"completed":return"完了";case"archived":return"アーカイブ";default:return"不明"}})(Z.status)})]})}),(0,r.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,r.jsxs)("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[(0,r.jsx)(u.Z,{size:20,className:"text-primary-400"}),"味の好み"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-text-secondary",children:"気分: "}),(0,r.jsxs)("span",{className:"inline-flex items-center gap-2",children:[{adventurous:"\uD83D\uDE80",relaxed:"\uD83D\uDE0C",celebratory:"\uD83C\uDF89",contemplative:"\uD83E\uDD14",social:"\uD83D\uDC65",nostalgic:"\uD83D\uDCAD"}[Z.profile.mood]||"\uD83C\uDF7A",Z.profile.mood]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-text-secondary",children:"好みの味わい: "}),(0,r.jsx)("span",{className:"font-medium",children:Z.profile.tastePreference.primary})]}),Z.profile.tastePreference.avoid.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-text-secondary",children:"避けたい味: "}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:Z.profile.tastePreference.avoid.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 rounded text-sm",children:e},e))})]})]})]}),(Z.profile.constraints.location||Z.profile.constraints.budget||(null===(e=Z.profile.constraints.other)||void 0===e?void 0:e.length))&&(0,r.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"制約・条件"}),(0,r.jsxs)("div",{className:"space-y-3",children:[Z.profile.constraints.location&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{size:16,className:"text-text-secondary"}),(0,r.jsx)("span",{children:Z.profile.constraints.location})]}),Z.profile.constraints.budget&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{size:16,className:"text-text-secondary"}),(0,r.jsx)("span",{children:Z.profile.constraints.budget})]}),null===(s=Z.profile.constraints.other)||void 0===s?void 0:s.map(e=>(0,r.jsx)("div",{className:"px-3 py-1 bg-background-secondary rounded text-sm",children:e},e))]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[Z.profile.searchKeywords.length>0&&(0,r.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"キーワード"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:Z.profile.searchKeywords.map(e=>(0,r.jsx)("span",{className:"px-3 py-1 bg-primary-500/20 text-primary-400 rounded-full text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"セッション情報"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(y.Z,{size:16,className:"text-text-secondary"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["作成: ",new Date(Z.createdAt).toLocaleDateString("ja-JP")]}),Z.updatedAt&&(0,r.jsxs)("div",{className:"text-text-secondary",children:["更新: ",new Date(Z.updatedAt).toLocaleDateString("ja-JP")]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-text-secondary",children:"プロンプト数: "}),(0,r.jsx)("span",{className:"font-medium",children:Z.generatedPrompts.length})]})]})]})]})]}),(0,r.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h3",{className:"font-semibold text-xl flex items-center gap-2",children:[(0,r.jsx)(g.Z,{size:24,className:"text-primary-400"}),"生成されたプロンプト"]}),(0,r.jsxs)("button",{onClick:T,disabled:E,className:"btn-secondary flex items-center gap-2",children:[(0,r.jsx)(f.Z,{size:16,className:E?"animate-spin":""}),E?"生成中...":"再生成"]})]}),Z.generatedPrompts.length>1&&(0,r.jsx)("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:Z.generatedPrompts.map((e,s)=>(0,r.jsxs)("button",{onClick:()=>q(s),className:"\n                    px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap\n                    ".concat(L===s?"bg-primary-500/20 text-primary-400":"bg-background-secondary text-text-secondary hover:text-text-primary","\n                  "),children:["プロンプト ",s+1,s===Z.generatedPrompts.length-1&&(0,r.jsx)("span",{className:"ml-1 text-xs",children:"(最新)"})]},s))}),(0,r.jsxs)("div",{className:"bg-background-secondary rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("span",{className:"text-sm text-text-secondary",children:["プロンプト ",L+1," / ",Z.generatedPrompts.length]}),(0,r.jsxs)("button",{onClick:()=>H(Z.generatedPrompts[L]),className:"\n                  flex items-center gap-2 px-4 py-2 rounded-lg transition-all\n                  ".concat(P?"bg-green-500/20 text-green-400":"bg-primary-500/20 text-primary-400 hover:bg-primary-500/30","\n                "),children:[P?(0,r.jsx)(j.Z,{size:16}):(0,r.jsx)(v.Z,{size:16}),P?"コピー済み":"コピー"]})]}),(0,r.jsx)("div",{className:"bg-background-primary rounded p-4 text-sm whitespace-pre-wrap max-h-96 overflow-y-auto",children:Z.generatedPrompts[L]})]}),(0,r.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4 mt-4",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-400 mb-2",children:"\uD83D\uDCA1 使用方法"}),(0,r.jsxs)("ul",{className:"text-sm text-text-secondary space-y-1",children:[(0,r.jsx)("li",{children:"• 上のプロンプトをコピーしてください"}),(0,r.jsx)("li",{children:"• ChatGPT、Claude、Geminiなどのお好みのAIサービスに貼り付けてください"}),(0,r.jsx)("li",{children:"• AIからの回答を待って、おすすめビールを楽しんでください！"}),(0,r.jsx)("li",{children:"• より良いプロンプトが必要な場合は「再生成」ボタンをお試しください"})]})]})]}),Z.notes&&(0,r.jsxs)("div",{className:"glass-card rounded-xl p-6 mt-6",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"メモ"}),(0,r.jsx)("p",{className:"text-text-secondary whitespace-pre-wrap",children:Z.notes})]})]}),M&&(0,r.jsx)("div",{className:"fixed inset-0 z-5",onClick:()=>_(!1)})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-dark",children:[(0,r.jsx)(b.Z,{}),(0,r.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-4rem)]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDE15"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"セッションが見つかりません"}),(0,r.jsx)("p",{className:"text-text-secondary mb-6",children:"指定されたセッションは存在しないか削除されています"}),(0,r.jsx)("button",{onClick:()=>k.push("/sessions"),className:"btn-primary",children:"セッション一覧に戻る"})]})})]})}}},function(e){e.O(0,[89,474,915,971,526,744],function(){return e(e.s=5525)}),_N_E=e.O()}]);