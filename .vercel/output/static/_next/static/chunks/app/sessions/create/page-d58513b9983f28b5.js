(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{7371:function(e,s,a){Promise.resolve().then(a.bind(a,7205))},5137:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2468:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7592:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6884:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},1077:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},4042:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9321:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2513:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1902:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},7205:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return f}});var r=a(7437),t=a(2265),l=a(6463),n=a(89),i=a(1902),c=a(4042),o=a(4817),d=a(9321),m=a(1077),x=a(2513),u=a(4697),b=a(3907),p=a(2468),y=a(6884),h=a(5137),g=a(7592),j=a(4935),v=a(4613);function f(){let{t:e}=(0,n.$G)(),s=(0,l.useRouter)(),[a,f]=(0,t.useState)(1),[N,k]=(0,t.useState)(!1),[w,Z]=(0,t.useState)(""),[C,D]=(0,t.useState)(!1),[S,T]=(0,t.useState)({sessionGoal:"",mood:"",primaryTaste:"",avoidTastes:[],location:"",budget:"",keywords:[],constraints:[]}),[z,A]=(0,t.useState)(""),[_,E]=(0,t.useState)("");(0,t.useEffect)(()=>{v.w.getAnalyticsService().trackEvent("page_view",{page:"session_create"})},[]);let G=[{value:"hoppy",label:"ホッピー",description:"IPA、ペールエールなど"},{value:"malty",label:"モルティ",description:"ラガー、ポーターなど"},{value:"fruity",label:"フルーティ",description:"ベルジャン、サワーなど"},{value:"smooth",label:"スムース",description:"ピルスナー、ライトエールなど"},{value:"complex",label:"複雑",description:"バーレーワイン、インペリアルスタウトなど"},{value:"crisp",label:"クリスプ",description:"ラガー、ケルシュなど"},{value:"roasted",label:"ローストが効いた",description:"スタウト、ポーターなど"},{value:"spicy",label:"スパイシー",description:"ベルジャン、セゾンなど"}],P=async()=>{if(!S.sessionGoal||!S.mood||!S.primaryTaste){alert("必須項目を入力してください");return}k(!0);try{v.w.getAnalyticsService().trackEvent("session_create_start",{mood:S.mood,primaryTaste:S.primaryTaste,hasLocation:!!S.location,keywordCount:S.keywords.length});let e={sessionGoal:S.sessionGoal,mood:S.mood,tastePreference:{primary:S.primaryTaste,avoid:S.avoidTastes,intensity:3},constraints:{location:S.location||void 0,budget:S.budget||void 0,other:S.constraints},searchKeywords:S.keywords},s=v.w.getPromptService(),a=await s.generateSessionPrompt(e);Z(a);let r=v.w.getStorageService(),t=await r.getSessions(),l={id:"session_".concat(Date.now()),sessionId:"session_".concat(Date.now()),userId:"user_local",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),profile:e,generatedPrompts:[a],status:"active",notes:"Generated on ".concat(new Date().toLocaleDateString("ja-JP"))};await r.saveSessions([...t,l]),v.w.getAnalyticsService().trackEvent("prompt_generated",{sessionId:l.id,promptLength:a.length,hasKeywords:S.keywords.length>0}),f(4)}catch(e){console.error("Error generating prompt:",e),v.w.getAnalyticsService().trackEvent("prompt_generation_error",{error:e instanceof Error?e.message:String(e)}),alert("プロンプト生成中にエラーが発生しました。もう一度お試しください。")}finally{k(!1)}},I=async()=>{try{await navigator.clipboard.writeText(w),D(!0),v.w.getAnalyticsService().trackEvent("prompt_copied"),setTimeout(()=>D(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},M=()=>{z.trim()&&!S.keywords.includes(z.trim())&&(T(e=>({...e,keywords:[...e.keywords,z.trim()]})),A(""))},q=e=>{T(s=>({...s,keywords:s.keywords.filter(s=>s!==e)}))},H=()=>{_.trim()&&!S.constraints.includes(_.trim())&&(T(e=>({...e,constraints:[...e.constraints,_.trim()]})),E(""))},K=e=>{T(s=>({...s,constraints:s.constraints.filter(s=>s!==e)}))},L=e=>{T(s=>({...s,avoidTastes:s.avoidTastes.includes(e)?s.avoidTastes.filter(s=>s!==e):[...s.avoidTastes,e]}))};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-dark",children:[(0,r.jsx)(j.Z,{}),(0,r.jsxs)("main",{className:"mobile-container mobile-section pb-24 lg:pb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,r.jsx)("button",{onClick:()=>a>1?f(a-1):s.push("/"),className:"btn-secondary-small",children:(0,r.jsx)(h.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"ビール発見セッション"}),(0,r.jsxs)("p",{className:"text-text-secondary",children:["ステップ ",a," / 4"]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-text-secondary mb-2",children:[(0,r.jsx)("span",{children:"目標設定"}),(0,r.jsx)("span",{children:"味の好み"}),(0,r.jsx)("span",{children:"詳細設定"}),(0,r.jsx)("span",{children:"プロンプト生成"})]}),(0,r.jsx)("div",{className:"w-full bg-background-secondary rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(a/4*100,"%")}})})]}),(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[1===a&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)(i.Z,{size:48,className:"text-primary-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"セッション目標を設定"}),(0,r.jsx)("p",{className:"text-text-secondary",children:"今回のビール発見で何を達成したいですか？"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-3",children:"今回の目標 *"}),(0,r.jsx)("textarea",{value:S.sessionGoal,onChange:e=>T(s=>({...s,sessionGoal:e.target.value})),placeholder:"例：新しいIPAスタイルを見つけたい、友人との飲み会にぴったりなビールを探したい、など",className:"w-full p-4 rounded-lg bg-background-secondary border border-gray-700 focus:border-primary-500 focus:outline-none resize-none",rows:4})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-3",children:"今の気分 *"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{value:"adventurous",label:"冒険的",emoji:"\uD83D\uDE80",description:"新しいスタイルを試したい"},{value:"relaxed",label:"リラックス",emoji:"\uD83D\uDE0C",description:"馴染みのある味を楽しみたい"},{value:"celebratory",label:"お祝い",emoji:"\uD83C\uDF89",description:"特別な日にふさわしいビール"},{value:"contemplative",label:"思索的",emoji:"\uD83E\uDD14",description:"じっくり味わいたい"},{value:"social",label:"社交的",emoji:"\uD83D\uDC65",description:"みんなで楽しめるビール"},{value:"nostalgic",label:"ノスタルジック",emoji:"\uD83D\uDCAD",description:"懐かしい味を求めている"}].map(e=>(0,r.jsxs)("button",{onClick:()=>T(s=>({...s,mood:e.value})),className:"\n                p-4 rounded-lg border text-left transition-all\n                ".concat(S.mood===e.value?"border-primary-500 bg-primary-500/10 text-primary-400":"border-gray-700 bg-background-secondary hover:border-gray-600","\n              "),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]}),(0,r.jsx)("p",{className:"text-sm text-text-secondary",children:e.description})]},e.value))})]})]}),2===a&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)(c.Z,{size:48,className:"text-primary-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"味の好みを教えてください"}),(0,r.jsx)("p",{className:"text-text-secondary",children:"あなたの味覚プロファイルを設定します"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-3",children:"好みの味わい *"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:G.map(e=>(0,r.jsxs)("button",{onClick:()=>T(s=>({...s,primaryTaste:e.value})),className:"\n                p-4 rounded-lg border text-left transition-all\n                ".concat(S.primaryTaste===e.value?"border-primary-500 bg-primary-500/10 text-primary-400":"border-gray-700 bg-background-secondary hover:border-gray-600","\n              "),children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:e.label}),(0,r.jsx)("p",{className:"text-sm text-text-secondary",children:e.description})]},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-3",children:"避けたい味わい（複数選択可）"}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:G.map(e=>(0,r.jsx)("button",{onClick:()=>L(e.value),className:"\n                p-3 rounded-lg border text-center transition-all text-sm\n                ".concat(S.avoidTastes.includes(e.value)?"border-red-500 bg-red-500/10 text-red-400":"border-gray-700 bg-background-secondary hover:border-gray-600","\n              "),children:e.label},e.value))})]})]}),3===a&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)(o.Z,{size:48,className:"text-primary-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"詳細設定（オプション）"}),(0,r.jsx)("p",{className:"text-text-secondary",children:"より精密な推奨のための追加情報"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-3",children:[(0,r.jsx)(d.Z,{size:16,className:"inline mr-2"}),"場所・地域"]}),(0,r.jsx)("input",{type:"text",value:S.location,onChange:e=>T(s=>({...s,location:e.target.value})),placeholder:"例：東京、大阪、ローカルブルワリー、など",className:"w-full p-3 rounded-lg bg-background-secondary border border-gray-700 focus:border-primary-500 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-3",children:[(0,r.jsx)(m.Z,{size:16,className:"inline mr-2"}),"予算・価格帯"]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3",children:[{value:"budget-friendly",label:"手頃（〜500円）",description:"普段使いできる価格帯"},{value:"moderate",label:"普通（500-1000円）",description:"バランスの取れた価格帯"},{value:"premium",label:"プレミアム（1000-2000円）",description:"特別な時のための価格帯"},{value:"luxury",label:"ラグジュアリー（2000円〜）",description:"最高級のビール体験"},{value:"flexible",label:"柔軟",description:"価格にこだわらない"}].map(e=>(0,r.jsxs)("button",{onClick:()=>T(s=>({...s,budget:e.value})),className:"\n                p-4 rounded-lg border text-left transition-all\n                ".concat(S.budget===e.value?"border-primary-500 bg-primary-500/10 text-primary-400":"border-gray-700 bg-background-secondary hover:border-gray-600","\n              "),children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:e.label}),(0,r.jsx)("p",{className:"text-sm text-text-secondary",children:e.description})]},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-3",children:"キーワード・関心事"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,r.jsx)("input",{type:"text",value:z,onChange:e=>A(e.target.value),onKeyPress:e=>"Enter"===e.key&&M(),placeholder:"例：クラフトビール、地ビール、季節限定",className:"flex-1 p-3 rounded-lg bg-background-secondary border border-gray-700 focus:border-primary-500 focus:outline-none"}),(0,r.jsx)("button",{onClick:M,className:"px-4 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:(0,r.jsx)(x.Z,{size:16})})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:S.keywords.map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-500/20 text-primary-400 rounded-full text-sm",children:[e,(0,r.jsx)("button",{onClick:()=>q(e),children:(0,r.jsx)(u.Z,{size:14})})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-3",children:"その他の制約・要望"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,r.jsx)("input",{type:"text",value:_,onChange:e=>E(e.target.value),onKeyPress:e=>"Enter"===e.key&&H(),placeholder:"例：ノンアルコール可、オーガニック、低カロリー",className:"flex-1 p-3 rounded-lg bg-background-secondary border border-gray-700 focus:border-primary-500 focus:outline-none"}),(0,r.jsx)("button",{onClick:H,className:"px-4 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:(0,r.jsx)(x.Z,{size:16})})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:S.constraints.map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-secondary-500/20 text-secondary-400 rounded-full text-sm",children:[e,(0,r.jsx)("button",{onClick:()=>K(e),children:(0,r.jsx)(u.Z,{size:14})})]},e))})]})]}),4===a&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)(b.Z,{size:48,className:"text-primary-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"プロンプトが生成されました！"}),(0,r.jsx)("p",{className:"text-text-secondary",children:"このプロンプトをAIサービスで使用してください"})]}),(0,r.jsxs)("div",{className:"bg-background-secondary rounded-lg p-6 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"font-medium",children:"生成されたプロンプト"}),(0,r.jsxs)("button",{onClick:I,className:"\n              flex items-center gap-2 px-4 py-2 rounded-lg transition-all\n              ".concat(C?"bg-green-500/20 text-green-400":"bg-primary-500/20 text-primary-400 hover:bg-primary-500/30","\n            "),children:[C?(0,r.jsx)(p.Z,{size:16}):(0,r.jsx)(y.Z,{size:16}),C?"コピー済み":"コピー"]})]}),(0,r.jsx)("div",{className:"bg-background-primary rounded p-4 text-sm whitespace-pre-wrap max-h-96 overflow-y-auto",children:w})]}),(0,r.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-400 mb-2",children:"\uD83D\uDCA1 使用方法"}),(0,r.jsxs)("ul",{className:"text-sm text-text-secondary space-y-1",children:[(0,r.jsx)("li",{children:"• 上のプロンプトをコピーしてください"}),(0,r.jsx)("li",{children:"• ChatGPT、Claude、Geminiなどのお好みのAIサービスに貼り付けてください"}),(0,r.jsx)("li",{children:"• AIからの回答を待って、おすすめビールを楽しんでください！"})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{onClick:()=>s.push("/sessions"),className:"flex-1 btn-secondary",children:"セッション一覧へ"}),(0,r.jsx)("button",{onClick:()=>{f(1),T({sessionGoal:"",mood:"",primaryTaste:"",avoidTastes:[],location:"",budget:"",keywords:[],constraints:[]}),Z("")},className:"flex-1 btn-primary",children:"新しいセッション"})]})]})]}),a<4&&(0,r.jsxs)("div",{className:"max-w-2xl mx-auto mt-8 flex gap-4",children:[a>1&&(0,r.jsx)("button",{onClick:()=>f(a-1),className:"btn-secondary flex-1",children:"戻る"}),a<3?(0,r.jsxs)("button",{onClick:()=>f(a+1),disabled:1===a&&(!S.sessionGoal||!S.mood)||2===a&&!S.primaryTaste,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:["次へ",(0,r.jsx)(g.Z,{size:20,className:"ml-2"})]}):(0,r.jsx)("button",{onClick:P,disabled:N||!S.sessionGoal||!S.mood||!S.primaryTaste,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:N?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"spinner mr-2"}),"プロンプト生成中..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.Z,{size:20,className:"mr-2"}),"プロンプト生成"]})})]})]})]})}}},function(e){e.O(0,[89,474,915,971,526,744],function(){return e(e.s=7371)}),_N_E=e.O()}]);