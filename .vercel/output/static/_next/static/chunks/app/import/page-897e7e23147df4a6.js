(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{5420:function(e,s,t){Promise.resolve().then(t.bind(t,8337))},5137:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5862:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8337:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var a=t(7437),l=t(2265),r=t(6463),n=t(7138),i=t(5862),c=t(5137),d=t(1066);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,d.Z)("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),x=(0,d.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var o=t(4697),h=t(8184);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,d.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var u=t(4935),g=t(4613);function f(){let e=(0,r.useRouter)(),[s,t]=(0,l.useState)(!1),[d,f]=(0,l.useState)([]),[j,b]=(0,l.useState)(!1),[y,N]=(0,l.useState)([]),[v,k]=(0,l.useState)(null),w=(0,l.useRef)(null),D=(0,l.useRef)(null),C=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?t(!0):"dragleave"===e.type&&t(!1)},z=e=>{e.target.files&&Z(Array.from(e.target.files))},Z=e=>{let s=e.filter(e=>e.type.startsWith("image/"));f(e=>[...e,...s]),k(null)},S=e=>{f(s=>s.filter((s,t)=>t!==e))},A=async()=>{if(0!==d.length){b(!0),k(null);try{await new Promise(e=>setTimeout(e,2e3));let e=d.map((e,s)=>({filename:e.name,beers:[{id:"beer_".concat(Date.now(),"_").concat(s),name:"Sample Beer ".concat(s+1),brewery:"Sample Brewery",style:"IPA",rating:4.2,notes:"Great hoppy flavor",source:"untappd",checkinDate:new Date().toISOString().split("T")[0],importedAt:new Date().toISOString()}]}));N(e);let s=g.w.getStorageService(),t=e.flatMap(e=>e.beers);await s.saveBeerHistory(t)}catch(e){k("画像の処理中にエラーが発生しました。もう一度お試しください。"),console.error("Error processing images:",e)}finally{b(!1)}}};if(y.length>0){let s=y.reduce((e,s)=>e+s.beers.length,0);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-dark",children:[(0,a.jsx)(u.Z,{}),(0,a.jsx)("main",{className:"mobile-container mobile-section pb-24 lg:pb-8",children:(0,a.jsxs)("div",{className:"text-center animate-fade-in",children:[(0,a.jsx)("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(i.Z,{size:40,className:"text-green-400"})}),(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-4 text-gradient",children:"インポート完了！"}),(0,a.jsxs)("p",{className:"text-text-secondary mb-8 max-w-md mx-auto",children:[s,"個のビールが正常にインポートされました"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,a.jsx)("button",{onClick:()=>{e.push("/history")},className:"btn-primary",children:"履歴を確認"}),(0,a.jsx)("button",{onClick:()=>{f([]),N([]),k(null),b(!1)},className:"btn-secondary",children:"続けてインポート"})]})]})})]})}return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-dark",children:[(0,a.jsx)(u.Z,{}),(0,a.jsxs)("main",{className:"mobile-container mobile-section pb-24 lg:pb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6 sm:mb-8",children:[(0,a.jsx)(n.default,{href:"/home",className:"btn-secondary-small",children:(0,a.jsx)(c.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gradient",children:"ビール履歴インポート"}),(0,a.jsx)("p",{className:"text-text-secondary text-sm sm:text-base",children:"スクリーンショットからビール情報を自動抽出"})]})]}),(0,a.jsxs)("div",{className:"glass-card rounded-xl p-6 mb-6 sm:mb-8",children:[(0,a.jsxs)("h2",{className:"text-lg sm:text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCF1"}),"対応アプリ"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:["Untappd","RateBeer","BeerAdvocate"].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background-secondary rounded-lg",children:[(0,a.jsx)(i.Z,{size:20,className:"text-green-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium",children:e})]},e))})]}),(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsxs)("div",{className:"\n              relative border-2 border-dashed rounded-xl p-8 sm:p-12 text-center transition-all duration-200\n              ".concat(s?"border-primary-400 bg-primary-500/10":"border-gray-600 hover:border-gray-500","\n              ").concat(d.length>0?"border-green-500 bg-green-500/10":"","\n            "),onDragEnter:C,onDragLeave:C,onDragOver:C,onDrop:e=>{e.preventDefault(),e.stopPropagation(),t(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&Z(Array.from(e.dataTransfer.files))},children:[(0,a.jsx)("input",{ref:w,type:"file",accept:"image/*",multiple:!0,onChange:z,className:"hidden"}),(0,a.jsx)("input",{ref:D,type:"file",accept:"image/*",capture:"environment",onChange:z,className:"hidden"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-4xl sm:text-5xl",children:d.length>0?"✅":"\uD83D\uDCF7"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:d.length>0?"".concat(d.length,"個のファイルが選択されました"):"スクリーンショットをアップロード"}),(0,a.jsx)("p",{className:"text-text-secondary text-sm sm:text-base",children:"ドラッグ&ドロップ、またはボタンでファイルを選択"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,a.jsxs)("button",{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},className:"btn-primary flex items-center justify-center gap-2",children:[(0,a.jsx)(m,{size:20}),"ファイルを選択"]}),(0,a.jsxs)("button",{onClick:()=>{var e;return null===(e=D.current)||void 0===e?void 0:e.click()},className:"btn-secondary flex items-center justify-center gap-2 lg:hidden",children:[(0,a.jsx)(x,{size:20}),"写真を撮る"]})]})]})]})}),d.length>0&&(0,a.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"選択されたファイル"}),(0,a.jsx)("div",{className:"space-y-3",children:d.map((e,s)=>(0,a.jsxs)("div",{className:"glass-card rounded-lg p-4 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(m,{size:20,className:"text-primary-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium line-clamp-1",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-text-secondary",children:[(e.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsx)("button",{onClick:()=>S(s),className:"btn-secondary-small text-red-400 hover:bg-red-500/20","aria-label":"ファイルを削除",children:(0,a.jsx)(o.Z,{size:16})})]},s))})]}),d.length>0&&!j&&(0,a.jsx)("div",{className:"text-center mb-6",children:(0,a.jsxs)("button",{onClick:A,className:"btn-primary text-lg px-8 py-4",children:[(0,a.jsx)(h.Z,{size:20,className:"mr-2"}),"ビール情報を抽出"]})}),j&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"spinner mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"画像を処理中..."}),(0,a.jsx)("p",{className:"text-text-secondary",children:"AIがビール情報を抽出しています。しばらくお待ちください。"})]}),v&&(0,a.jsx)("div",{className:"glass-card rounded-xl p-6 border border-red-500/50 bg-red-500/10",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(p,{size:20,className:"text-red-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-red-400 mb-1",children:"エラーが発生しました"}),(0,a.jsx)("p",{className:"text-sm text-text-secondary",children:v})]})]})}),(0,a.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCA1"}),"より良い結果を得るためのコツ"]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm sm:text-base",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full flex-shrink-0 mt-2"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"ビール名、醸造所名、評価が見やすいスクリーンショットを使用"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full flex-shrink-0 mt-2"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"画像は鮮明で、文字がはっきり読める状態が理想的"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full flex-shrink-0 mt-2"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"複数のビールが含まれるスクリーンショットも対応"})]})]})]})]})]})}}},function(e){e.O(0,[89,474,915,971,526,744],function(){return e(e.s=5420)}),_N_E=e.O()}]);